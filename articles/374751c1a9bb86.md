---
title: "ProxmoxãŒèµ·å‹•ã§ããªã„â€¼ grub rescueã®error: diskã‚’è§£æ±ºã™ã‚‹ã‚ˆ"
emoji: "ğŸ†˜"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics:
  - "linux"
  - "proxmox"
published: true
---

# ğŸ’¾ ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æ§‹æˆ

1TB WD Red SN700 M.2-2280 NVMe
â””â”€ Proxmox VE 8.1.4

4TB WD Red Plus HDD
â””â”€ Backup

# ğŸš¨ äº‹ä»¶ç™ºç”Ÿ

èµ·å‹•ã™ã‚‹ã¨ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«
```sh
Welcome to GRUB!

error: disk 'lvmid/hogehogehoge/hogehogehoge' not found.
grub rescue>
```
ã¨è¡¨ç¤ºã•ã‚Œã¦ProxmoxãŒèµ·å‹•ã§ããªããªã‚‹äº‹æ¡ˆãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚

# ğŸ” èª¿æŸ»

```sh
grub rescue> ls
(hd0) (hd0,gpt1) (hd1) (hd1,gpt3) (hd1,gpt2) (hd1,gpt1)
grub rescue> ls (hd0,gpt1)/
lost+found/ template/ images/ snippets/ private/ dump/
```

hd0
â†‘æã‚‰ãã“ã‚Œã¯ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¨ã—ã¦ä½¿ç”¨ã—ã¦ã„ã‚‹HDDã§ã™ã€‚
â€»è§£æ±ºå¾Œã«èª¿ã¹ãŸçµæœã€ã‚„ã¯ã‚Šãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ç”¨ã®HDDã§ã—ãŸã€‚/mnt/pve/backupã§ã™ã€‚

```sh
grub rescue> ls (hd1,gpt3)/
error: unknown filesystem.
grub rescue> ls (hd1,gpt2)/
error: unknown filesystem.
grub rescue> ls (hd1,gpt1)/
error: unknown filesystem.
```

hd1
â†‘hd0ãŒHDDã¨ã„ã†ã“ã¨ã¯ã€ã“ã¡ã‚‰ã¯ProxmoxãŒå…¥ã£ã¦ã„ã‚‹SSDã ã¨æ¨æ¸¬ã—ã¾ã™ã€‚
æœ¬æ¥ãªã‚‰gpt1,2,3ã®ä½•ã‚Œã‹ã«ã‚·ã‚¹ãƒ†ãƒ ãŒå…¥ã£ã¦ã„ã‚‹ã¯ãšã§ã™ãŒã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã„ã¾ã™ã­...ã€‚

# â›‘ï¸ Super Grub2 Disk

https://www.supergrubdisk.org/

https://www.supergrubdisk.org/category/download/supergrub2diskdownload/super-grub2-disk-stable/

ã“ã¡ã‚‰ã®ã‚½ãƒ•ãƒˆã§çœ ã£ã¦ã„ã‚‹Proxmoxã‚’èµ·å‹•ã•ã›ã¾ã™ã€‚èµ·ãã‚â€¼ğŸ’¢ğŸ‘Š
super_grub2_disk_hybrid_xxx.isoã‚’USBãƒ¡ãƒ¢ãƒªã«æ›¸ãè¾¼ã‚“ã§èµ·å‹•ã—ã¾ã™ã€‚

![](/images/374751c1a9bb86/enable_grub2's.png)
`Enable GRUB2's RAID and LVM support`ã‚’é¸æŠã—ã¾ã™ã€‚

çµ‚äº†ã—ãŸã‚‰ESCã‚­ãƒ¼ã§ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«æˆ»ã‚Šã¾ã™ã€‚

![](/images/374751c1a9bb86/boot_manually.png)

![](/images/374751c1a9bb86/operating_systems.png)
`Boot manually...` â†’ `Operating Systems`ã‚’é¸æŠã—ã¾ã™ã€‚

æœ€å¾Œã‹ã‚‰2ç•ªç›®ã®
`Linux /boot/vmlinuz-x.xx.xx-x-pve (lvm/pve-root)`ã‚’é¸æŠã—ã¾ã™ã€‚

ProxmoxãŒèµ·å‹•ã™ã‚‹ã¯ãšã§ã™ã€‚

ã¾ãšã€grubãŒå…¥ã£ã¦ã„ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’èª¿ã¹ã¾ã™ã€‚
```sh
lsblk
```
![](/images/374751c1a9bb86/lsblk.png)

nvme0n1p2ã®bootãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«grubãŒã‚ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã—ãŸã€‚

ã“ã“ã§grubã®å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’ã—ã¾ã™ã€‚
```sh
update-grub
grub-install /dev/nvme0n1p2
```
:::message
ç’°å¢ƒã«ã‚ˆã£ã¦å¤‰ã‚ã‚‹ã®ã§ã€é©åˆ‡ãªãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã¦ã­ã€‚
:::

ãã—ã¦å†èµ·å‹•ã—ã¦ã¿ã‚‹ã¨ç›´ã£ã¦ã„ã‚‹ã¯ãšã§ã™ï¼

# ğŸ”– å‚è€ƒ

https://www.reddit.com/r/Proxmox/comments/vy33ho/stuck_at_grub_rescue_after_an_update_and_reboot/